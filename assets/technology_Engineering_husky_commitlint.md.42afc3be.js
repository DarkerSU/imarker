import{_ as s,c as n,o as a,Q as l}from"./chunks/framework.466b0381.js";const o="/imarker/images/engineering/husky目录.png",p="/imarker/images/engineering/commitlint-error1.png",e="/imarker/images/engineering/commitlint-error2.png",u=JSON.parse('{"title":"husky + commitlint","description":"","frontmatter":{},"headers":[],"relativePath":"technology/Engineering/husky+commitlint.md"}'),t={name:"technology/Engineering/husky+commitlint.md"},c=l(`<h1 id="husky-commitlint" tabindex="-1">husky + commitlint <a class="header-anchor" href="#husky-commitlint" aria-label="Permalink to &quot;husky + commitlint&quot;">​</a></h1><p><strong>前言</strong></p><div class="warning custom-block"><p class="custom-block-title">为什么要对 commit msg 进行规范化？</p><pre><code>清晰、一致的 Git Commit 信息对于团队协作和项目维护非常重要。通过遵循规范，可以获得以下好处：
</code></pre><ul><li><p><strong>可读性</strong>：规范化的 Commit 信息能够让其他开发人员更轻松地理解每个提交所做的更改。</p></li><li><p><strong>变更历史</strong>：良好的规范能够提供清晰的变更历史记录，帮助开发者了解代码库的演进和每个提交的目的。</p></li><li><p><strong>回溯和回滚</strong>：规范的 Commit 信息使得回溯和回滚变得更加容易，开发者可以更快地找到特定的提交并恢复或撤销更改。</p></li><li><p><strong>自动化工具支持</strong>：一些自动化工具（如代码生成、版本发布等）可以根据规范化的 Commit 信息来执行特定的操作，提高工作效率。</p></li></ul></div><h2 id="_1、配置-git-提交校验钩子" tabindex="-1">1、配置 git 提交校验钩子 <a class="header-anchor" href="#_1、配置-git-提交校验钩子" aria-label="Permalink to &quot;1、配置 git 提交校验钩子&quot;">​</a></h2><ul><li>husky: git提交时触发hooks</li><li>commitlint: 对提交的内容做规范校验husky，主要对pre-commit和commit-msg钩子做校验。</li></ul><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 安装husky</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">husky</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 初始化husky配置，在根目录新增.husky配置文件，初始化配置pre-commit</span></span>
<span class="line"><span style="color:#FFCB6B;">npx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">husky-init</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 另外新增一个hooks： commit-msg</span></span>
<span class="line"><span style="color:#FFCB6B;">npx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">husky</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.husky/commit-msg</span></span>
<span class="line"></span></code></pre></div><p>目录结构如下 <img src="`+o+`"></p><p>在<code>commit-msg</code>文件中添加 <code>npm run commitlint</code></p><p>在<code>pre-commit</code>文件中有一条 <code>npm run test</code> 先注释掉，不然汇报报错</p><h2 id="_2、配置-commitlint" tabindex="-1">2、配置 commitlint <a class="header-anchor" href="#_2、配置-commitlint" aria-label="Permalink to &quot;2、配置 commitlint&quot;">​</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 安装相关依赖</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@commitlint/cli</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@commitlint/config-conventional</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span></span>
<span class="line"></span></code></pre></div><p>添加配置文件，新建<code>commitlint.config.ts</code>，然后添加如下代码</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">UserConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@commitlint/types</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> CommitlintConfig</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserConfig</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">extends</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@commitlint/config-conventional</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 校验规则</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">type-enum</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">always</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      [</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">init</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 初始化 */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">feat</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 添加新特性 */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">fix</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 修改Bug */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">perf</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 优化相关，比如提升性能，体验等  */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">style</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 格式（非正常业务逻辑变动） */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">docs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 文档修改 */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">merge</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 合并分支 */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">update</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 更新 */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">refactor</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 重构（即不是新增功能，也不是修改bug的代码变动） */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 增加测试 */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">chore</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 构建过程或辅助工具的变动 */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">revert</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 代码版本回滚 */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">workflow</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">/* 添加工作流 */</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> CommitlintConfig</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="_3、配置commitlint脚本信息" tabindex="-1">3、配置commitlint脚本信息 <a class="header-anchor" href="#_3、配置commitlint脚本信息" aria-label="Permalink to &quot;3、配置commitlint脚本信息&quot;">​</a></h2><p>因为我们要运行 <code>npm run commitlint</code>，所以需要再<code>package.json</code>文件中添加如下代码：</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">commitlint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">commitlint --config commitlint.config.ts -e -V</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"></span></code></pre></div><p>配置完成后，我们在<code>commit</code>代码时，就需要在<code>commit</code>信息前添加如下的<code>subject</code></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">init</span><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 初始化,</span></span>
<span class="line"><span style="color:#FFCB6B;">feat</span><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 添加新特性,</span></span>
<span class="line"><span style="color:#FFCB6B;">fix</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;"># 修改Bug,</span></span>
<span class="line"><span style="color:#FFCB6B;">perf</span><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 优化相关，比如提升性能，体验等 ,</span></span>
<span class="line"><span style="color:#FFCB6B;">style</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 格式（非正常业务逻辑变动）,</span></span>
<span class="line"><span style="color:#FFCB6B;">docs</span><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 文档修改,</span></span>
<span class="line"><span style="color:#FFCB6B;">merge</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 合并分支,</span></span>
<span class="line"><span style="color:#FFCB6B;">update</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 更新,</span></span>
<span class="line"><span style="color:#FFCB6B;">refactor</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 重构（即不是新增功能，也不是修改bug的代码变动）,</span></span>
<span class="line"><span style="color:#82AAFF;">test</span><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 增加测试,</span></span>
<span class="line"><span style="color:#FFCB6B;">chore</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 构建过程或辅助工具的变动,</span></span>
<span class="line"><span style="color:#FFCB6B;">revert</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 代码版本回滚,</span></span>
<span class="line"><span style="color:#FFCB6B;">workflow</span><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 添加工作流,</span></span>
<span class="line"></span></code></pre></div><p>比如： <code>git commit -m &#39;feat: 新特性&#39;</code>，注意：<code>feat: </code>后面有一个空格。</p><p>如果不写相关的 <code>subject</code>，会出现如下报错：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">⧗</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">input:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">测试</span></span>
<span class="line"><span style="color:#FFCB6B;">✖</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">subject</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">may</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">be</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">empty</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">subject-empty</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#FFCB6B;">✖</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">may</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">be</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">empty</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">type-empty</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">✖</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">found</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">problems,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">warnings</span></span>
<span class="line"><span style="color:#FFCB6B;">ⓘ</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">Get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">help:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/conventional-changelog/commitlint/#what-is-commitlint</span></span>
<span class="line"></span></code></pre></div><h2 id="_4、使用-commitizen-做git规范化提交" tabindex="-1">4、使用 commitizen 做git规范化提交 <a class="header-anchor" href="#_4、使用-commitizen-做git规范化提交" aria-label="Permalink to &quot;4、使用 commitizen 做git规范化提交&quot;">​</a></h2><p>由于使用了commitlint验证，对于不熟悉提交规范的新手同学来说会有一定的影响，可以添加commitizen工具，手动生产规范化的<code>commit</code>。</p><p><code>commitizen</code> 是一个格式化<code>commit meaasge</code>的工具。</p><p>安装<code>commitizen</code></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">commitizen</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span></span>
<span class="line"></span></code></pre></div><h3 id="_4-1、使用-cz-converntional-changelog" tabindex="-1">4.1、使用 cz-converntional-changelog <a class="header-anchor" href="#_4-1、使用-cz-converntional-changelog" aria-label="Permalink to &quot;4.1、使用 cz-converntional-changelog&quot;">​</a></h3><ul><li>安装<code>cz-conventional-changelog</code></li></ul><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cz-converntional-changelog</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span></span>
<span class="line"></span></code></pre></div><ul><li>配置运行命令</li></ul><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">script</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">:</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">commit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cz</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>在package.json 中添加定义<code>commitizen</code>使用规则</li></ul><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">commitizen</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./node_modules/cz-conventional-changelog</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>当执行<code>git commit</code>的时候，就可以提示我们填写提交代码规则了</p><h3 id="_4-2、自定义-commitizen-规则" tabindex="-1">4.2、自定义 commitizen 规则 <a class="header-anchor" href="#_4-2、自定义-commitizen-规则" aria-label="Permalink to &quot;4.2、自定义 commitizen 规则&quot;">​</a></h3><ul><li>安装<code>cz-customizable</code>工具</li></ul><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cz-customizable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span></span>
<span class="line"></span></code></pre></div><h2 id="_5、常见问题" tabindex="-1">5、常见问题 <a class="header-anchor" href="#_5、常见问题" aria-label="Permalink to &quot;5、常见问题&quot;">​</a></h2><h3 id="_5-1、invalid-or-unexpected-token" tabindex="-1">5.1、Invalid or unexpected token <a class="header-anchor" href="#_5-1、invalid-or-unexpected-token" aria-label="Permalink to &quot;5.1、Invalid or unexpected token&quot;">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">commitlint</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ts:</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">��m</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">SyntaxError</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> Invalid or unexpected token</span></span>
<span class="line"><span style="color:#A6ACCD;">    at </span><span style="color:#82AAFF;">wrapSafe</span><span style="color:#A6ACCD;"> (internal</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">modules</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">cjs</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">loader</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">1001</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">16</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    at Module</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_compile</span><span style="color:#A6ACCD;"> (internal</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">modules</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">cjs</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">loader</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">1049</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">27</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    at Object</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Module</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_extensions</span><span style="color:#89DDFF;">..</span><span style="color:#82AAFF;">js</span><span style="color:#A6ACCD;"> (internal</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">modules</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">cjs</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">loader</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">1114</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    at Module</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">load</span><span style="color:#A6ACCD;"> (internal</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">modules</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">cjs</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">loader</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">950</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    at Function</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Module</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_load</span><span style="color:#A6ACCD;"> (internal</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">modules</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">cjs</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">loader</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">790</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">14</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    at Module</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;"> (internal</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">modules</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">cjs</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">loader</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">974</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">19</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    at </span><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> (E:\\nancalProject\\sass</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">match</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">web\\node_modules\\@commitlint\\load\\node_modules\\import</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">fresh\\index</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">59</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    at </span><span style="color:#82AAFF;">loadJs</span><span style="color:#A6ACCD;"> (E:\\nancalProject\\sass</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">match</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">web\\node_modules\\@commitlint\\load\\node_modules\\cosmiconfig\\dist\\loaders</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">16</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">18</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    at Explorer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">loadFileContent</span><span style="color:#A6ACCD;"> (E:\\nancalProject\\sass</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">match</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">web\\node_modules\\@commitlint\\load\\node_modules\\cosmiconfig\\dist\\Explorer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">84</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    at Explorer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createCosmiconfigResult</span><span style="color:#A6ACCD;"> (E:\\nancalProject\\sass</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">match</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">web\\node_modules\\@commitlint\\load\\node_modules\\cosmiconfig\\dist\\Explorer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">89</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">36</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">husky </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> commit</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">msg hook exited </span><span style="color:#89DDFF;font-style:italic;">with</span><span style="color:#A6ACCD;"> code </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> (error)</span></span>
<span class="line"></span></code></pre></div><p><strong>原因</strong>：用<code>echo &quot;module.exports = {extends: [&#39;@commitlint/config-conventional&#39;]}&quot; &gt; commitlint.config.ts</code>这条命令，生成的 <code>commitlint.config.ts</code> 文件不是 <code>utf8</code> 格式的，将文件转成 <code>utf8</code> 格式的就没问题了</p><p>解决办法如下: <img src="`+p+'"><img src="'+e+'"> 然后选择utf-8，就解决啦。</p>',42),r=[c];function y(D,C,i,A,F,m){return a(),n("div",null,r)}const g=s(t,[["render",y]]);export{u as __pageData,g as default};
