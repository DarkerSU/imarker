import{_ as s,c as a,o as n,N as e}from"./chunks/framework.cd9250a1.js";const o="/images/other/wechat/demo.jpg",t="/images/other/wechat/api.png",A=JSON.parse('{"title":"weapp-qrcode 生成二维码","description":"","frontmatter":{},"headers":[],"relativePath":"technology/Other/小程序/小程序实现二维码生成.md"}'),p={name:"technology/Other/小程序/小程序实现二维码生成.md"},l=e(`<h1 id="weapp-qrcode-生成二维码" tabindex="-1">weapp-qrcode 生成二维码 <a class="header-anchor" href="#weapp-qrcode-生成二维码" aria-label="Permalink to &quot;weapp-qrcode 生成二维码&quot;">​</a></h1><p><a href="https://badge.fury.io/js/weapp-qrcode" target="_blank" rel="noreferrer"><img src="https://badge.fury.io/js/weapp-qrcode.svg" alt="npm version"></a></p><p><a href="https://github.com/yingye/weapp-qrcode/blob/master/CHANGELOG.md" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/changelog-md-blue.svg" alt="change-log"></a></p><p>weapp.qrcode.js 在 微信小程序 中，快速生成二维码</p><h2 id="安装使用" tabindex="-1">安装使用 <a class="header-anchor" href="#安装使用" aria-label="Permalink to &quot;安装使用&quot;">​</a></h2><p>先在 wxml 文件中，创建绘制的 <code>canvas</code>，并定义好 <code>width</code>, <code>height</code>, <code>canvasId</code> 。</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">canvas</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">width: 200px; height: 200px;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">canvas-id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">myQrcode</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">canvas</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>直接引入 js 文件，使用 <code>drawQrcode()</code> 绘制二维码。!!!在 调用 <code>drawQrcode()</code> 方法之前，一定要确保可以获取到 <code>canvas context</code> 。</p><p>在 v0.6.0 版本构建出多个文件，详情移步<a href="https://github.com/yingye/weapp-qrcode/blob/master/dist/README.md" target="_blank" rel="noreferrer">Build Files说明</a>。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 将 dist 目录下，weapp.qrcode.esm.js 复制到项目目录中</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> drawQrcode </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../../utils/weapp.qrcode.esm.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">drawQrcode</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">height</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">canvasId</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">myQrcode</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ctx: wx.createCanvasContext(&#39;myQrcode&#39;),</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://github.com/yingye</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// v1.0.0+版本支持在二维码上绘制图片</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">imageResource</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../../images/icon.png</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">dx</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">70</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">dy</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">70</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">dWidth</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">60</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">dHeight</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">60</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>如果项目使用了 wepy 框架，可直接安装 <code>weapp-qrcode</code> npm包。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">npm install weapp-qrcode --save</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> drawQrcode </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">weapp-qrcode</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">drawQrcode</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">height</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">canvasId</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">myQrcode</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://github.com/yingye</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="demo" tabindex="-1">DEMO <a class="header-anchor" href="#demo" aria-label="Permalink to &quot;DEMO&quot;">​</a></h2><img src="`+o+'" width="300"><p>更多 demo 可以参考 <a href="https://github.com/yingye/weapp-qrcode/tree/master/examples" target="_blank" rel="noreferrer">examples目录</a>，示例包含原生语法及WePY、mpvue、Taro框架。</p><h2 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-label="Permalink to &quot;API&quot;">​</a></h2><h3 id="drawqrcode-options" tabindex="-1">drawQrcode([options]) <a class="header-anchor" href="#drawqrcode-options" aria-label="Permalink to &quot;drawQrcode([options])&quot;">​</a></h3><h4 id="options" tabindex="-1">options <a class="header-anchor" href="#options" aria-label="Permalink to &quot;options&quot;">​</a></h4><p>Type: Object</p><table><thead><tr><th>参数</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>width</td><td>必须，二维码宽度，与<code>canvas</code>的<code>width</code>保持一致</td><td>200</td></tr><tr><td>height</td><td>必须，二维码高度，与<code>canvas</code>的<code>height</code>保持一致</td><td>200</td></tr><tr><td>canvasId</td><td>非必须，绘制的<code>canvasId</code></td><td><code>&#39;myQrcode&#39;</code></td></tr><tr><td>ctx</td><td>非必须，绘图上下文，可通过 <code>wx.createCanvasContext(&#39;canvasId&#39;)</code> 获取，v1.0.0+版本支持</td><td><code>&#39;wx.createCanvasContext(&#39;canvasId&#39;)&#39;</code></td></tr><tr><td>text</td><td>必须，二维码内容</td><td>&#39;<a href="https://github.com/yingye" target="_blank" rel="noreferrer">https://github.com/yingye</a>&#39;</td></tr><tr><td>typeNumber</td><td>非必须，二维码的计算模式，默认值-1</td><td>8</td></tr><tr><td>correctLevel</td><td>非必须，二维码纠错级别，默认值为高级，取值：<code>{ L: 1, M: 0, Q: 3, H: 2 }</code></td><td>1</td></tr><tr><td>background</td><td>非必须，二维码背景颜色，默认值白色</td><td><code>&#39;#ffffff&#39;</code></td></tr><tr><td>foreground</td><td>非必须，二维码前景色，默认值黑色</td><td><code>&#39;#000000&#39;</code></td></tr><tr><td>_this</td><td>非必须，若在组件中使用，需要传入，v0.7.0+版本支持</td><td>this</td></tr><tr><td>callback</td><td>非必须，绘制完成后的回调函数，v0.8.0+版本支持。安卓手机兼容性问题，可通过自行设置计时器来解决，更多可以参考 <a href="https://github.com/yingye/weapp-qrcode/issues/18" target="_blank" rel="noreferrer">issue #18</a></td><td><code>function (e) { console.log(&#39;e&#39;, e) }</code></td></tr><tr><td>x</td><td>非必须，二维码绘制的 x 轴起始位置，默认值0，v1.0.0+版本支持</td><td>100</td></tr><tr><td>y</td><td>非必须，二维码绘制的 y 轴起始位置，默认值0，v1.0.0+版本支持</td><td>100</td></tr><tr><td>image</td><td>非必须，在 canvas 上绘制图片，<strong>层级高于二维码</strong>，v1.0.0+版本支持，更多可参考<a href="https://developers.weixin.qq.com/miniprogram/dev/api/CanvasContext.drawImage.html" target="_blank" rel="noreferrer">drawImage</a></td><td><code>{ imageResource: &#39;&#39;, dx: 0, dy: 0, dWidth: 100, dHeight: 100 }</code></td></tr></tbody></table><p><strong>位置信息可以参见下图：</strong></p><img src="'+t+'" width="500" height="500"><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>weapp.qrcode.js 二维码生成部分借鉴了 jquery-qrcode 源码，可以参考 <a href="https://github.com/jeromeetienne/jquery-qrcode" target="_blank" rel="noreferrer">jquery-qrcode</a>。</p></div>',24),r=[l];function c(d,i,y,D,F,h){return n(),a("div",null,r)}const g=s(p,[["render",c]]);export{A as __pageData,g as default};
